<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>模版生成工具</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>    
    <script src="https://unpkg.com/vue"></script>
    <script>
        function convertNewline(multilineText){
            if(multilineText){
                return multilineText.replace(/\n/g,'\\\\\n');
            }
        }
        function convertMultilineInOneline(multilineText){
            if(multilineText){
                return multilineText.replace(/\n/g,'\\\\ ');
            }
        }
        function convertOrderList(multilineText){
            if(multilineText){
                var ret = '';
                var multilineArray = multilineText.split('\n');
                for(var i in multilineArray){
                    multilineArray[i] = '  - ' + multilineArray[i];
                    ret += multilineArray[i] + '\n';
                }
                return ret;
            }
        }
    </script>
</head>
<body>                
    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#quest" data-toggle="tab">任务</a></li>
        <li role="presentation"><a href="#blade" data-toggle="tab">异刃</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="quest">
            <div class="container-fluid" id="app">
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>地点</label>
                        <input type="text" class="form-control" v-model="quest.place">
                    </div>
                    <div class="form-group">
                        <label>条件</label>
                        <input type="text" class="form-control" v-model="quest.requirement">   
                    </div>
                    <div class="form-group">
                        <label>任务NPC</label>
                        <input type="text" class="form-control" v-model="quest.npc">
                    </div>
                    <div class="form-group">
                        <label>报酬额</label>
                        <input type="text" class="form-control" v-model="reward.gil">
                    </div>
                    <div class="form-group">
                        <label>EXP</label>
                        <input type="text" class="form-control" v-model="reward.exp">
                    </div>
                    <div class="form-group">
                        <label>SP</label>
                        <input type="text" class="form-control" v-model="reward.sp">    
                    </div>
                    <div class="form-group">
                        <label>奖励道具</label>
                        <textarea class="form-control" v-model="reward.items" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label>游戏内任务说明文本</label>
                        <textarea class="form-control" v-model="quest.text" rows="4"></textarea>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>任务步骤</label>
                        <textarea class="form-control" v-model="quest.step" rows="15"></textarea>
                    </div>
                    <div class="form-group">
                        <label>攻略要点</label>
                        <textarea class="form-control" v-model="quest.keypoint" rows="10"></textarea>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            结果 <button class="btn btn-default" id="button">复制</button>
                        </div>
                        <div class="panel-body">
<pre>
====== 任务说明 ======

&lt;WRAP half&gt;
|地点  |  {{quest.place}}|
|条件  |  {{quest.requirement}}|
|NPC  |  {{quest.npc}}|
|报酬额  |  {{reward.gil}}|
|EXP  |  {{reward.exp}}|
|SP  |  {{reward.sp}}|
|奖励道具  |  {{items}}|
&lt;/WRAP&gt;

{{text}}

====== 任务步骤 ======

{{step}}
====== 攻略要点 ======

{{keypoint}}
</pre>
                        </div>     
                    </div>
                </div>
            </div>
        </div>
        <div role="tabpanel" class="tab-pane" id="blade">
            制作中
        </div>
    </div>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                reward: {},
                quest: {},
                },
            computed: {
                items: function(){
                    return convertMultilineInOneline(this.reward.items);
                },
                text: function(){
                    return convertNewline(this.quest.text);
                },
                step: function(){
                    return convertOrderList(this.quest.step);
                },
                keypoint: function(){
                    return convertOrderList(this.quest.keypoint);
                },
            }
        })
    </script>

    <script>var copy_url = new Clipboard('#button', {text: function() {return $('.panel-body').text();}});</script>

    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</body>
</html>